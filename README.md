# MatLab-
使用MatLab进行水下模糊图像、雾天模糊图像的复原，还有一个运动模糊图像复原的文件但是效果很烂，等后面有时间再改了
文件说明：
Final_work.mlapp是用MatLab的appdesigner写的一个程序，可以在这个界面选择使用哪种图像进行复原
dynamic_test.m就是测试的那个效果巨差的运动模糊图像复原的代码
water_test.m是水下图像复原的文件
fog_work.m是雾天模糊图像复原的文件
文件中的各种参数基本都有对应的注释
用于测试水下图像复原效果的图片是：Fish_input.png和Diver_input.png
用于测试雾天图像复原效果的图片是：city_input.png和cityscape_input.png
用于运动模糊图像复原测试的图片是：ian1.png
最后的那个报告是做这个项目的一些步骤，涉及到的公式以及过程中遇到的一些问题，最后一个运动模糊的部分没有参考意义，我做的时候有点蒙圈


关于water_test.m中用到的两个滤波器：
guided_filter滤波器是用于实现引导滤波的滤波器，基于局部线性模型的边缘保持平滑，主要用于消除噪声、增强细节，同时保持边缘的清晰度
输入参数：
I：引导图像（应为彩色RGB图像）
p：需要滤波的输入图像（应为灰度图像/单通道图像）
r：局部窗口半径
eps：正则化参数
步骤解析：
计算局部窗口大小 N：通过 boxfilter(ones(hei, wid), r) 计算每个局部窗口的大小
计算引导图像的均值 mean_I_r, mean_I_g, mean_I_b：使用 boxfilter 计算引导图像每个通道在局部窗口内的均值
计算输入图像的均值 mean_p：使用 boxfilter 计算输入图像在局部窗口内的均值
计算引导图像和输入图像的均值积 mean_Ip_r, mean_Ip_g, mean_Ip_b：使用 boxfilter 计算引导图像每个通道与输入图像的均值积
计算协方差 cov_Ip_r, cov_Ip_g, cov_Ip_b：计算引导图像每个通道与输入图像的协方差
计算引导图像的方差 var_I_rr, var_I_rg, var_I_rb, var_I_gg, var_I_gb, var_I_bb：计算引导图像每个通道的方差和协方差
线性系数计算 a(y, x, :)：通过解方程组计算线性系数
偏置计算 b：根据线性系数和均值计算偏置
输出图像 q：通过线性系数和偏置计算输出图像


box_filter滤波器是一个简单线性滤波器，用于实现盒滤波，计算局部窗口内的均值
输入参数：

imSrc：需要滤波的输入图像。
r：局部窗口半径。
步骤解析：

累积和计算（Y轴）：首先在Y轴上计算累积和 imCum
差分计算（Y轴）：通过累积和计算局部窗口内的和 imDst
累积和计算（X轴）：然后在X轴上计算累积和 imCum
差分计算（X轴）：通过累积和计算局部窗口内的和 imDst
